{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Server,Check,AlertCircle,RefreshCw}from'lucide-react';import{getServers,switchServer,checkServerHealth}from'../services/api';import'./ServerSelector.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function ServerSelector(_ref){let{onClose}=_ref;const[servers,setServers]=useState([]);const[checking,setChecking]=useState(false);const[closing,setClosing]=useState(false);useEffect(()=>{loadServers();// Listen for server changes\nconst handleServerChange=()=>{loadServers();};window.addEventListener('server-changed',handleServerChange);return()=>{window.removeEventListener('server-changed',handleServerChange);};},[]);const loadServers=()=>{const serverList=getServers();setServers(serverList);};const handleSelectServer=serverKey=>{switchServer(serverKey);loadServers();// Show success message\nconst server=servers.find(s=>s.key===serverKey);console.log(\"\\u2705 Switched to \".concat(server.name));// Reload page to apply changes\nsetTimeout(()=>{window.location.reload();},500);};const handleCheckHealth=async()=>{setChecking(true);for(const server of servers){await checkServerHealth(server.key);}loadServers();setChecking(false);};const handleClose=()=>{setClosing(true);setTimeout(()=>{onClose();},300);// match animation duration\n};const getStatusIcon=status=>{switch(status){case'online':return/*#__PURE__*/_jsx(Check,{size:18,className:\"status-check\"});case'offline':return/*#__PURE__*/_jsx(AlertCircle,{size:18,className:\"status-error\"});default:return/*#__PURE__*/_jsx(RefreshCw,{size:18,className:\"status-checking\"});}};const getStatusColor=status=>{switch(status){case'online':return'#10b981';case'offline':return'#ef4444';default:return'#6b7280';}};return/*#__PURE__*/_jsx(\"div\",{className:\"server-selector-overlay\",onClick:onClose,children:/*#__PURE__*/_jsxs(\"div\",{className:\"server-selector-modal \".concat(closing?'closing':''),onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"server-selector-header\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header-title\",children:[/*#__PURE__*/_jsx(Server,{size:24}),/*#__PURE__*/_jsx(\"h2\",{children:\"Select Server\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:onClose,className:\"close-button\",children:\"\\u2715\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"server-selector-body\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"selector-description\",children:\"Choose which server to connect to. Changes take effect immediately.\"}),/*#__PURE__*/_jsx(\"div\",{className:\"servers-list\",children:servers.map(server=>/*#__PURE__*/_jsxs(\"div\",{className:\"server-item \".concat(server.isCurrent?'active':''),onClick:()=>!server.isCurrent&&handleSelectServer(server.key),children:[/*#__PURE__*/_jsx(\"div\",{className:\"server-icon\",style:{color:server.color},children:/*#__PURE__*/_jsx(\"span\",{className:\"icon-emoji\",children:server.icon})}),/*#__PURE__*/_jsxs(\"div\",{className:\"server-info\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"server-name\",children:[server.name,server.isCurrent&&/*#__PURE__*/_jsx(\"span\",{className:\"current-badge\",children:\"Current\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"server-description\",children:server.description}),/*#__PURE__*/_jsx(\"div\",{className:\"server-url\",children:server.url})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"server-status\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"status-indicator\",style:{borderColor:getStatusColor(server.status)},children:getStatusIcon(server.status)}),/*#__PURE__*/_jsx(\"span\",{className:\"status-text\",style:{color:getStatusColor(server.status)},children:server.status})]})]},server.key))}),/*#__PURE__*/_jsx(\"div\",{className:\"selector-actions\",children:/*#__PURE__*/_jsx(\"button\",{onClick:handleCheckHealth,className:\"btn-check-health\",disabled:checking,children:checking?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(RefreshCw,{size:18,className:\"spinner\"}),\"Checking...\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(RefreshCw,{size:18}),\"Check All Servers\"]})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"selector-note\",children:[/*#__PURE__*/_jsx(AlertCircle,{size:16}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Development Server:\"}),\" Use for local testing. Ensure your backend is running on localhost:5000\"]})]})]})]})});}export default ServerSelector;","map":{"version":3,"names":["React","useState","useEffect","Server","Check","AlertCircle","RefreshCw","getServers","switchServer","checkServerHealth","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ServerSelector","_ref","onClose","servers","setServers","checking","setChecking","closing","setClosing","loadServers","handleServerChange","window","addEventListener","removeEventListener","serverList","handleSelectServer","serverKey","server","find","s","key","console","log","concat","name","setTimeout","location","reload","handleCheckHealth","handleClose","getStatusIcon","status","size","className","getStatusColor","onClick","children","e","stopPropagation","map","isCurrent","style","color","icon","description","url","borderColor","disabled"],"sources":["E:/Self/QRGenerator/qrweb/frontend/src/components/ServerSelector.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Server, Check, AlertCircle, RefreshCw } from 'lucide-react';\r\nimport { getServers, switchServer, checkServerHealth } from '../services/api';\r\nimport './ServerSelector.css';\r\n\r\nfunction ServerSelector({ onClose }) {\r\n  const [servers, setServers] = useState([]);\r\n  const [checking, setChecking] = useState(false);\r\n  const [closing, setClosing] = useState(false);\r\n\r\n  useEffect(() => {\r\n    loadServers();\r\n    \r\n    // Listen for server changes\r\n    const handleServerChange = () => {\r\n      loadServers();\r\n    };\r\n    \r\n    window.addEventListener('server-changed', handleServerChange);\r\n    \r\n    return () => {\r\n      window.removeEventListener('server-changed', handleServerChange);\r\n    };\r\n  }, []);\r\n\r\n  const loadServers = () => {\r\n    const serverList = getServers();\r\n    setServers(serverList);\r\n  };\r\n\r\n  const handleSelectServer = (serverKey) => {\r\n    switchServer(serverKey);\r\n    loadServers();\r\n    \r\n    // Show success message\r\n    const server = servers.find(s => s.key === serverKey);\r\n    console.log(`✅ Switched to ${server.name}`);\r\n    \r\n    // Reload page to apply changes\r\n    setTimeout(() => {\r\n      window.location.reload();\r\n    }, 500);\r\n  };\r\n\r\n  const handleCheckHealth = async () => {\r\n    setChecking(true);\r\n    \r\n    for (const server of servers) {\r\n      await checkServerHealth(server.key);\r\n    }\r\n    \r\n    loadServers();\r\n    setChecking(false);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setClosing(true);\r\n    setTimeout(() => {\r\n      onClose();\r\n    }, 300); // match animation duration\r\n  };\r\n\r\n  const getStatusIcon = (status) => {\r\n    switch (status) {\r\n      case 'online':\r\n        return <Check size={18} className=\"status-check\" />;\r\n      case 'offline':\r\n        return <AlertCircle size={18} className=\"status-error\" />;\r\n      default:\r\n        return <RefreshCw size={18} className=\"status-checking\" />;\r\n    }\r\n  };\r\n\r\n  const getStatusColor = (status) => {\r\n    switch (status) {\r\n      case 'online':\r\n        return '#10b981';\r\n      case 'offline':\r\n        return '#ef4444';\r\n      default:\r\n        return '#6b7280';\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"server-selector-overlay\" onClick={onClose}>\r\n        <div\r\n            className={`server-selector-modal ${closing ? 'closing' : ''}`}\r\n            onClick={(e) => e.stopPropagation()}\r\n        >\r\n        <div className=\"server-selector-header\">\r\n          <div className=\"header-title\">\r\n            <Server size={24} />\r\n            <h2>Select Server</h2>\r\n          </div>\r\n          <button onClick={onClose} className=\"close-button\">\r\n            ✕\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"server-selector-body\">\r\n          <p className=\"selector-description\">\r\n            Choose which server to connect to. Changes take effect immediately.\r\n          </p>\r\n\r\n          <div className=\"servers-list\">\r\n            {servers.map((server) => (\r\n              <div\r\n                key={server.key}\r\n                className={`server-item ${server.isCurrent ? 'active' : ''}`}\r\n                onClick={() => !server.isCurrent && handleSelectServer(server.key)}\r\n              >\r\n                <div className=\"server-icon\" style={{ color: server.color }}>\r\n                  <span className=\"icon-emoji\">{server.icon}</span>\r\n                </div>\r\n\r\n                <div className=\"server-info\">\r\n                  <div className=\"server-name\">\r\n                    {server.name}\r\n                    {server.isCurrent && (\r\n                      <span className=\"current-badge\">Current</span>\r\n                    )}\r\n                  </div>\r\n                  <div className=\"server-description\">{server.description}</div>\r\n                  <div className=\"server-url\">{server.url}</div>\r\n                </div>\r\n\r\n                <div className=\"server-status\">\r\n                  <div \r\n                    className=\"status-indicator\"\r\n                    style={{ borderColor: getStatusColor(server.status) }}\r\n                  >\r\n                    {getStatusIcon(server.status)}\r\n                  </div>\r\n                  <span \r\n                    className=\"status-text\"\r\n                    style={{ color: getStatusColor(server.status) }}\r\n                  >\r\n                    {server.status}\r\n                  </span>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n\r\n          <div className=\"selector-actions\">\r\n            <button \r\n              onClick={handleCheckHealth} \r\n              className=\"btn-check-health\"\r\n              disabled={checking}\r\n            >\r\n              {checking ? (\r\n                <>\r\n                  <RefreshCw size={18} className=\"spinner\" />\r\n                  Checking...\r\n                </>\r\n              ) : (\r\n                <>\r\n                  <RefreshCw size={18} />\r\n                  Check All Servers\r\n                </>\r\n              )}\r\n            </button>\r\n          </div>\r\n\r\n          <div className=\"selector-note\">\r\n            <AlertCircle size={16} />\r\n            <p>\r\n              <strong>Development Server:</strong> Use for local testing. \r\n              Ensure your backend is running on localhost:5000\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ServerSelector;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}