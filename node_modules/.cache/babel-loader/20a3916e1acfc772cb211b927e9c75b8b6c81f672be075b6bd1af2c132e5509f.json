{"ast":null,"code":"/**\r\n * Server Selection System v1.0.3a\r\n * Manual server selection - Railway as primary\r\n */\n\nconst SERVERS = {\n  production: {\n    name: 'Railway (Primary)',\n    url: process.env.REACT_APP_API_URL || 'https://qrserver.up.railway.app/api',\n    description: 'Main production server â€¢ 2 vCPU + 1GB RAM',\n    icon: 'ðŸš€',\n    color: '#8b5cf6',\n    specs: '2 vCPU / 1GB'\n  },\n  backup: {\n    name: 'Render (Backup)',\n    url: process.env.REACT_APP_API_URL_BACKUP || 'https://your-app.onrender.com/api',\n    description: 'Backup production server â€¢ 0.1 vCPU + 124MB RAM',\n    icon: 'ðŸ”„',\n    color: '#3b82f6',\n    specs: '0.1 vCPU / 124MB'\n  },\n  development: {\n    name: 'Development (Local)',\n    url: process.env.REACT_APP_API_URL_DEV || 'http://localhost:5000/api',\n    description: 'Local development server â€¢ Optimized for testing',\n    icon: 'ðŸ’»',\n    color: '#10b981',\n    specs: 'Local'\n  }\n};\nclass ServerSelector {\n  constructor() {\n    const savedServer = localStorage.getItem('selectedServer');\n    this.currentServer = savedServer || 'production'; // Default to Railway\n    this.serverStatus = new Map();\n    Object.keys(SERVERS).forEach(key => {\n      this.serverStatus.set(key, 'unknown');\n    });\n  }\n  getCurrentServer() {\n    return SERVERS[this.currentServer];\n  }\n  getCurrentURL() {\n    return SERVERS[this.currentServer].url;\n  }\n  switchServer(serverKey) {\n    if (SERVERS[serverKey]) {\n      this.currentServer = serverKey;\n      localStorage.setItem('selectedServer', serverKey);\n      this.notifyServerChange(serverKey);\n      return true;\n    }\n    return false;\n  }\n  getServers() {\n    return Object.entries(SERVERS).map(([key, server]) => ({\n      key,\n      ...server,\n      status: this.serverStatus.get(key),\n      isCurrent: key === this.currentServer\n    }));\n  }\n  async checkServerHealth(serverKey) {\n    const server = SERVERS[serverKey];\n    if (!server) return false;\n    const controller = new AbortController();\n    const timeoutId = setTimeout(() => controller.abort(), 5000);\n    try {\n      const response = await fetch(`${server.url}/health`, {\n        method: 'GET',\n        signal: controller.signal,\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n      clearTimeout(timeoutId);\n      if (response.ok) {\n        this.serverStatus.set(serverKey, 'online');\n        return true;\n      }\n      throw new Error('Health check failed');\n    } catch (error) {\n      clearTimeout(timeoutId);\n      this.serverStatus.set(serverKey, 'offline');\n      console.warn(`âŒ ${server.name} is offline:`, error.message);\n      return false;\n    }\n  }\n  async checkAllServers() {\n    console.log('ðŸ” Checking all servers...');\n    const checks = Object.keys(SERVERS).map(key => this.checkServerHealth(key));\n    await Promise.allSettled(checks);\n    Object.entries(SERVERS).forEach(([key, server]) => {\n      const status = this.serverStatus.get(key);\n      const icon = status === 'online' ? 'âœ…' : 'âŒ';\n      console.log(`${icon} ${server.name}: ${status}`);\n    });\n  }\n  getStatus(serverKey) {\n    return this.serverStatus.get(serverKey);\n  }\n  notifyServerChange(serverKey) {\n    const event = new CustomEvent('server-changed', {\n      detail: {\n        server: SERVERS[serverKey],\n        key: serverKey\n      }\n    });\n    window.dispatchEvent(event);\n  }\n}\nconst serverSelector = new ServerSelector();\n\n// Check servers on load\nserverSelector.checkAllServers();\n\n// Periodic health check (every 60 seconds)\nsetInterval(() => {\n  serverSelector.checkAllServers();\n}, 60000);\nexport default serverSelector;","map":{"version":3,"names":["SERVERS","production","name","url","process","env","REACT_APP_API_URL","description","icon","color","specs","backup","REACT_APP_API_URL_BACKUP","development","REACT_APP_API_URL_DEV","ServerSelector","constructor","savedServer","localStorage","getItem","currentServer","serverStatus","Map","Object","keys","forEach","key","set","getCurrentServer","getCurrentURL","switchServer","serverKey","setItem","notifyServerChange","getServers","entries","map","server","status","get","isCurrent","checkServerHealth","controller","AbortController","timeoutId","setTimeout","abort","response","fetch","method","signal","headers","clearTimeout","ok","Error","error","console","warn","message","checkAllServers","log","checks","Promise","allSettled","getStatus","event","CustomEvent","detail","window","dispatchEvent","serverSelector","setInterval"],"sources":["E:/Self/QRGenerator/qrweb/frontend/src/services/serverSelector.js"],"sourcesContent":["/**\r\n * Server Selection System v1.0.3a\r\n * Manual server selection - Railway as primary\r\n */\r\n\r\nconst SERVERS = {\r\n  production: {\r\n    name: 'Railway (Primary)',\r\n    url: process.env.REACT_APP_API_URL || 'https://qrserver.up.railway.app/api',\r\n    description: 'Main production server â€¢ 2 vCPU + 1GB RAM',\r\n    icon: 'ðŸš€',\r\n    color: '#8b5cf6',\r\n    specs: '2 vCPU / 1GB'\r\n  },\r\n  backup: {\r\n    name: 'Render (Backup)',\r\n    url: process.env.REACT_APP_API_URL_BACKUP || 'https://your-app.onrender.com/api',\r\n    description: 'Backup production server â€¢ 0.1 vCPU + 124MB RAM',\r\n    icon: 'ðŸ”„',\r\n    color: '#3b82f6',\r\n    specs: '0.1 vCPU / 124MB'\r\n  },\r\n  development: {\r\n    name: 'Development (Local)',\r\n    url: process.env.REACT_APP_API_URL_DEV || 'http://localhost:5000/api',\r\n    description: 'Local development server â€¢ Optimized for testing',\r\n    icon: 'ðŸ’»',\r\n    color: '#10b981',\r\n    specs: 'Local'\r\n  }\r\n};\r\n\r\nclass ServerSelector {\r\n  constructor() {\r\n    const savedServer = localStorage.getItem('selectedServer');\r\n    this.currentServer = savedServer || 'production'; // Default to Railway\r\n    this.serverStatus = new Map();\r\n    \r\n    Object.keys(SERVERS).forEach(key => {\r\n      this.serverStatus.set(key, 'unknown');\r\n    });\r\n  }\r\n\r\n  getCurrentServer() {\r\n    return SERVERS[this.currentServer];\r\n  }\r\n\r\n  getCurrentURL() {\r\n    return SERVERS[this.currentServer].url;\r\n  }\r\n\r\n  switchServer(serverKey) {\r\n    if (SERVERS[serverKey]) {\r\n      this.currentServer = serverKey;\r\n      localStorage.setItem('selectedServer', serverKey);\r\n      this.notifyServerChange(serverKey);\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  getServers() {\r\n    return Object.entries(SERVERS).map(([key, server]) => ({\r\n      key,\r\n      ...server,\r\n      status: this.serverStatus.get(key),\r\n      isCurrent: key === this.currentServer\r\n    }));\r\n  }\r\n\r\n  async checkServerHealth(serverKey) {\r\n    const server = SERVERS[serverKey];\r\n    if (!server) return false;\r\n\r\n    const controller = new AbortController();\r\n    const timeoutId = setTimeout(() => controller.abort(), 5000);\r\n\r\n    try {\r\n      const response = await fetch(`${server.url}/health`, {\r\n        method: 'GET',\r\n        signal: controller.signal,\r\n        headers: { 'Content-Type': 'application/json' }\r\n      });\r\n\r\n      clearTimeout(timeoutId);\r\n\r\n      if (response.ok) {\r\n        this.serverStatus.set(serverKey, 'online');\r\n        return true;\r\n      }\r\n\r\n      throw new Error('Health check failed');\r\n\r\n    } catch (error) {\r\n      clearTimeout(timeoutId);\r\n      this.serverStatus.set(serverKey, 'offline');\r\n      console.warn(`âŒ ${server.name} is offline:`, error.message);\r\n      return false;\r\n    }\r\n  }\r\n\r\n  async checkAllServers() {\r\n    console.log('ðŸ” Checking all servers...');\r\n    \r\n    const checks = Object.keys(SERVERS).map(key => \r\n      this.checkServerHealth(key)\r\n    );\r\n    \r\n    await Promise.allSettled(checks);\r\n\r\n    Object.entries(SERVERS).forEach(([key, server]) => {\r\n      const status = this.serverStatus.get(key);\r\n      const icon = status === 'online' ? 'âœ…' : 'âŒ';\r\n      console.log(`${icon} ${server.name}: ${status}`);\r\n    });\r\n  }\r\n\r\n  getStatus(serverKey) {\r\n    return this.serverStatus.get(serverKey);\r\n  }\r\n\r\n  notifyServerChange(serverKey) {\r\n    const event = new CustomEvent('server-changed', {\r\n      detail: { \r\n        server: SERVERS[serverKey],\r\n        key: serverKey\r\n      }\r\n    });\r\n    window.dispatchEvent(event);\r\n  }\r\n}\r\n\r\nconst serverSelector = new ServerSelector();\r\n\r\n// Check servers on load\r\nserverSelector.checkAllServers();\r\n\r\n// Periodic health check (every 60 seconds)\r\nsetInterval(() => {\r\n  serverSelector.checkAllServers();\r\n}, 60000);\r\n\r\nexport default serverSelector;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}