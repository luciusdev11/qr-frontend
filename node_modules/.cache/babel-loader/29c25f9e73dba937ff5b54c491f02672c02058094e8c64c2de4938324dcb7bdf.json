{"ast":null,"code":"import _objectSpread from\"E:/Self/QRGenerator/qrweb/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import axios from'axios';// Auto-detect API URL\nconst getAPIUrl=()=>{// Production: use environment variable\nif(process.env.NODE_ENV==='production'&&process.env.REACT_APP_API_URL){return process.env.REACT_APP_API_URL;}// Development: use localhost\nreturn'http://localhost:5000/api';};const API_URL=getAPIUrl();console.log('ðŸ”— API URL:',API_URL);// Create axios instance with default config\nconst api=axios.create({baseURL:API_URL,headers:{'Content-Type':'application/json'},timeout:30000// 30 seconds\n});// Request interceptor\napi.interceptors.request.use(config=>{if(process.env.NODE_ENV==='development'){console.log(\"\\uD83D\\uDCE4 API Request: \".concat(config.method.toUpperCase(),\" \").concat(config.url));}return config;},error=>{console.error('âŒ Request Error:',error);return Promise.reject(error);});// Response interceptor with retry logic\napi.interceptors.response.use(response=>{if(process.env.NODE_ENV==='development'){console.log('ðŸ“¥ API Response:',response.status,response.data);}return response;},async error=>{var _error$config,_error$response,_error$response2,_error$response2$data;const originalRequest=error.config;// Retry logic for network errors\nif(!error.response&&!originalRequest._retry){originalRequest._retry=true;console.warn('âš ï¸  Network error, retrying...');await new Promise(resolve=>setTimeout(resolve,1000));return api(originalRequest);}console.error('âŒ API Error:',{url:(_error$config=error.config)===null||_error$config===void 0?void 0:_error$config.url,status:(_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.status,message:((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.error)||error.message});return Promise.reject(error);});// QR Code API functions\nexport const qrAPI={// Generate new QR code\ngenerate:async function(originalUrl){let createdBy=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'anonymous';let customization=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};let logo=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;try{const response=await api.post('/qr/generate',{originalUrl,createdBy,customization,logo});return response.data;}catch(error){var _error$response3,_error$response3$data;throw new Error(((_error$response3=error.response)===null||_error$response3===void 0?void 0:(_error$response3$data=_error$response3.data)===null||_error$response3$data===void 0?void 0:_error$response3$data.error)||'Failed to generate QR code');}},// Get all QR codes with pagination\nlist:async function(){let params=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};try{const{limit=100,page=1,sortBy='createdAt',order='desc'}=params;const response=await api.get('/qr/list',{params:{limit,page,sortBy,order}});return response.data;}catch(error){var _error$response4,_error$response4$data;throw new Error(((_error$response4=error.response)===null||_error$response4===void 0?void 0:(_error$response4$data=_error$response4.data)===null||_error$response4$data===void 0?void 0:_error$response4$data.error)||'Failed to fetch QR codes');}},// Get single QR code by ID\ngetById:async id=>{try{const response=await api.get(\"/qr/\".concat(id));return response.data;}catch(error){var _error$response5,_error$response5$data;throw new Error(((_error$response5=error.response)===null||_error$response5===void 0?void 0:(_error$response5$data=_error$response5.data)===null||_error$response5$data===void 0?void 0:_error$response5$data.error)||'Failed to fetch QR code');}},// Delete QR code\ndelete:async id=>{try{const response=await api.delete(\"/qr/\".concat(id));return response.data;}catch(error){var _error$response6,_error$response6$data;throw new Error(((_error$response6=error.response)===null||_error$response6===void 0?void 0:(_error$response6$data=_error$response6.data)===null||_error$response6$data===void 0?void 0:_error$response6$data.error)||'Failed to delete QR code');}},// Get QR code statistics\ngetStats:async id=>{try{const response=await api.get(\"/qr/stats/\".concat(id));return response.data;}catch(error){var _error$response7,_error$response7$data;throw new Error(((_error$response7=error.response)===null||_error$response7===void 0?void 0:(_error$response7$data=_error$response7.data)===null||_error$response7$data===void 0?void 0:_error$response7$data.error)||'Failed to fetch statistics');}}};// Health check with detailed info\nexport const healthCheck=async()=>{try{const response=await api.get('/health');return _objectSpread({status:'OK'},response.data);}catch(error){var _error$response8;return{status:'ERROR',error:error.message,details:(_error$response8=error.response)===null||_error$response8===void 0?void 0:_error$response8.data};}};// Test connection\nexport const testConnection=async()=>{try{const health=await healthCheck();return health.status==='OK';}catch(error){return false;}};export default api;","map":{"version":3,"names":["axios","getAPIUrl","process","env","NODE_ENV","REACT_APP_API_URL","API_URL","console","log","api","create","baseURL","headers","timeout","interceptors","request","use","config","concat","method","toUpperCase","url","error","Promise","reject","response","status","data","_error$config","_error$response","_error$response2","_error$response2$data","originalRequest","_retry","warn","resolve","setTimeout","message","qrAPI","generate","originalUrl","createdBy","arguments","length","undefined","customization","logo","post","_error$response3","_error$response3$data","Error","list","params","limit","page","sortBy","order","get","_error$response4","_error$response4$data","getById","id","_error$response5","_error$response5$data","delete","_error$response6","_error$response6$data","getStats","_error$response7","_error$response7$data","healthCheck","_objectSpread","_error$response8","details","testConnection","health"],"sources":["E:/Self/QRGenerator/qrweb/frontend/src/services/api.js"],"sourcesContent":["import axios from 'axios';\r\n\r\n// Auto-detect API URL\r\nconst getAPIUrl = () => {\r\n  // Production: use environment variable\r\n  if (process.env.NODE_ENV === 'production' && process.env.REACT_APP_API_URL) {\r\n    return process.env.REACT_APP_API_URL;\r\n  }\r\n  \r\n  // Development: use localhost\r\n  return 'http://localhost:5000/api';\r\n};\r\n\r\nconst API_URL = getAPIUrl();\r\n\r\nconsole.log('ðŸ”— API URL:', API_URL);\r\n\r\n// Create axios instance with default config\r\nconst api = axios.create({\r\n  baseURL: API_URL,\r\n  headers: {\r\n    'Content-Type': 'application/json',\r\n  },\r\n  timeout: 30000, // 30 seconds\r\n});\r\n\r\n// Request interceptor\r\napi.interceptors.request.use(\r\n  (config) => {\r\n    if (process.env.NODE_ENV === 'development') {\r\n      console.log(`ðŸ“¤ API Request: ${config.method.toUpperCase()} ${config.url}`);\r\n    }\r\n    return config;\r\n  },\r\n  (error) => {\r\n    console.error('âŒ Request Error:', error);\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\n// Response interceptor with retry logic\r\napi.interceptors.response.use(\r\n  (response) => {\r\n    if (process.env.NODE_ENV === 'development') {\r\n      console.log('ðŸ“¥ API Response:', response.status, response.data);\r\n    }\r\n    return response;\r\n  },\r\n  async (error) => {\r\n    const originalRequest = error.config;\r\n\r\n    // Retry logic for network errors\r\n    if (!error.response && !originalRequest._retry) {\r\n      originalRequest._retry = true;\r\n      console.warn('âš ï¸  Network error, retrying...');\r\n      await new Promise(resolve => setTimeout(resolve, 1000));\r\n      return api(originalRequest);\r\n    }\r\n\r\n    console.error('âŒ API Error:', {\r\n      url: error.config?.url,\r\n      status: error.response?.status,\r\n      message: error.response?.data?.error || error.message\r\n    });\r\n\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\n// QR Code API functions\r\nexport const qrAPI = {\r\n  // Generate new QR code\r\n  generate: async (originalUrl, createdBy = 'anonymous', customization = {}, logo = null) => {\r\n    try {\r\n      const response = await api.post('/qr/generate', {\r\n        originalUrl,\r\n        createdBy,\r\n        customization,\r\n        logo\r\n      });\r\n      return response.data;\r\n    } catch (error) {\r\n      throw new Error(error.response?.data?.error || 'Failed to generate QR code');\r\n    }\r\n  },\r\n\r\n  // Get all QR codes with pagination\r\n  list: async (params = {}) => {\r\n    try {\r\n      const { limit = 100, page = 1, sortBy = 'createdAt', order = 'desc' } = params;\r\n      const response = await api.get('/qr/list', {\r\n        params: { limit, page, sortBy, order },\r\n      });\r\n      return response.data;\r\n    } catch (error) {\r\n      throw new Error(error.response?.data?.error || 'Failed to fetch QR codes');\r\n    }\r\n  },\r\n\r\n  // Get single QR code by ID\r\n  getById: async (id) => {\r\n    try {\r\n      const response = await api.get(`/qr/${id}`);\r\n      return response.data;\r\n    } catch (error) {\r\n      throw new Error(error.response?.data?.error || 'Failed to fetch QR code');\r\n    }\r\n  },\r\n\r\n  // Delete QR code\r\n  delete: async (id) => {\r\n    try {\r\n      const response = await api.delete(`/qr/${id}`);\r\n      return response.data;\r\n    } catch (error) {\r\n      throw new Error(error.response?.data?.error || 'Failed to delete QR code');\r\n    }\r\n  },\r\n\r\n  // Get QR code statistics\r\n  getStats: async (id) => {\r\n    try {\r\n      const response = await api.get(`/qr/stats/${id}`);\r\n      return response.data;\r\n    } catch (error) {\r\n      throw new Error(error.response?.data?.error || 'Failed to fetch statistics');\r\n    }\r\n  },\r\n};\r\n\r\n// Health check with detailed info\r\nexport const healthCheck = async () => {\r\n  try {\r\n    const response = await api.get('/health');\r\n    return { \r\n      status: 'OK', \r\n      ...response.data \r\n    };\r\n  } catch (error) {\r\n    return { \r\n      status: 'ERROR', \r\n      error: error.message,\r\n      details: error.response?.data \r\n    };\r\n  }\r\n};\r\n\r\n// Test connection\r\nexport const testConnection = async () => {\r\n  try {\r\n    const health = await healthCheck();\r\n    return health.status === 'OK';\r\n  } catch (error) {\r\n    return false;\r\n  }\r\n};\r\n\r\nexport default api;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}