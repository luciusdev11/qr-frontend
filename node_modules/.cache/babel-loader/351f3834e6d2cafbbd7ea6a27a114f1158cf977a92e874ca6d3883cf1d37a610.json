{"ast":null,"code":"import axios from 'axios';\n\n// Auto-detect API URL\nconst getAPIUrl = () => {\n  // Production: use environment variable\n  if (process.env.NODE_ENV === 'production' && process.env.REACT_APP_API_URL) {\n    return process.env.REACT_APP_API_URL;\n  }\n\n  // Development: use localhost\n  return 'http://localhost:5000/api';\n};\nconst API_URL = getAPIUrl();\nconsole.log('ðŸ”— API URL:', API_URL);\n\n// Create axios instance with default config\nconst api = axios.create({\n  baseURL: API_URL,\n  headers: {\n    'Content-Type': 'application/json'\n  },\n  timeout: 30000 // 30 seconds\n});\n\n// Request interceptor\napi.interceptors.request.use(config => {\n  if (process.env.NODE_ENV === 'development') {\n    console.log(`ðŸ“¤ API Request: ${config.method.toUpperCase()} ${config.url}`);\n  }\n  return config;\n}, error => {\n  console.error('âŒ Request Error:', error);\n  return Promise.reject(error);\n});\n\n// Response interceptor with retry logic\napi.interceptors.response.use(response => {\n  if (process.env.NODE_ENV === 'development') {\n    console.log('ðŸ“¥ API Response:', response.status, response.data);\n  }\n  return response;\n}, async error => {\n  var _error$config, _error$response, _error$response2, _error$response2$data;\n  const originalRequest = error.config;\n\n  // Retry logic for network errors\n  if (!error.response && !originalRequest._retry) {\n    originalRequest._retry = true;\n    console.warn('âš ï¸  Network error, retrying...');\n    await new Promise(resolve => setTimeout(resolve, 1000));\n    return api(originalRequest);\n  }\n  console.error('âŒ API Error:', {\n    url: (_error$config = error.config) === null || _error$config === void 0 ? void 0 : _error$config.url,\n    status: (_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status,\n    message: ((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : _error$response2$data.error) || error.message\n  });\n  return Promise.reject(error);\n});\n\n// QR Code API functions\nexport const qrAPI = {\n  // Generate new QR code\n  generate: async (originalUrl, createdBy = 'anonymous', customization = {}, logo = null) => {\n    try {\n      const response = await api.post('/qr/generate', {\n        originalUrl,\n        createdBy,\n        customization,\n        logo\n      });\n      return response.data;\n    } catch (error) {\n      var _error$response3, _error$response3$data;\n      throw new Error(((_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : (_error$response3$data = _error$response3.data) === null || _error$response3$data === void 0 ? void 0 : _error$response3$data.error) || 'Failed to generate QR code');\n    }\n  },\n  // Get all QR codes with pagination\n  list: async (params = {}) => {\n    try {\n      const {\n        limit = 100,\n        page = 1,\n        sortBy = 'createdAt',\n        order = 'desc'\n      } = params;\n      const response = await api.get('/qr/list', {\n        params: {\n          limit,\n          page,\n          sortBy,\n          order\n        }\n      });\n      return response.data;\n    } catch (error) {\n      var _error$response4, _error$response4$data;\n      throw new Error(((_error$response4 = error.response) === null || _error$response4 === void 0 ? void 0 : (_error$response4$data = _error$response4.data) === null || _error$response4$data === void 0 ? void 0 : _error$response4$data.error) || 'Failed to fetch QR codes');\n    }\n  },\n  // Get single QR code by ID\n  getById: async id => {\n    try {\n      const response = await api.get(`/qr/${id}`);\n      return response.data;\n    } catch (error) {\n      var _error$response5, _error$response5$data;\n      throw new Error(((_error$response5 = error.response) === null || _error$response5 === void 0 ? void 0 : (_error$response5$data = _error$response5.data) === null || _error$response5$data === void 0 ? void 0 : _error$response5$data.error) || 'Failed to fetch QR code');\n    }\n  },\n  // Delete QR code\n  delete: async id => {\n    try {\n      const response = await api.delete(`/qr/${id}`);\n      return response.data;\n    } catch (error) {\n      var _error$response6, _error$response6$data;\n      throw new Error(((_error$response6 = error.response) === null || _error$response6 === void 0 ? void 0 : (_error$response6$data = _error$response6.data) === null || _error$response6$data === void 0 ? void 0 : _error$response6$data.error) || 'Failed to delete QR code');\n    }\n  },\n  // Get QR code statistics\n  getStats: async id => {\n    try {\n      const response = await api.get(`/qr/stats/${id}`);\n      return response.data;\n    } catch (error) {\n      var _error$response7, _error$response7$data;\n      throw new Error(((_error$response7 = error.response) === null || _error$response7 === void 0 ? void 0 : (_error$response7$data = _error$response7.data) === null || _error$response7$data === void 0 ? void 0 : _error$response7$data.error) || 'Failed to fetch statistics');\n    }\n  }\n};\n\n// Health check with detailed info\nexport const healthCheck = async () => {\n  try {\n    const response = await api.get('/health');\n    return {\n      status: 'OK',\n      ...response.data\n    };\n  } catch (error) {\n    var _error$response8;\n    return {\n      status: 'ERROR',\n      error: error.message,\n      details: (_error$response8 = error.response) === null || _error$response8 === void 0 ? void 0 : _error$response8.data\n    };\n  }\n};\n\n// Test connection\nexport const testConnection = async () => {\n  try {\n    const health = await healthCheck();\n    return health.status === 'OK';\n  } catch (error) {\n    return false;\n  }\n};\nexport default api;","map":{"version":3,"names":["axios","getAPIUrl","process","env","NODE_ENV","REACT_APP_API_URL","API_URL","console","log","api","create","baseURL","headers","timeout","interceptors","request","use","config","method","toUpperCase","url","error","Promise","reject","response","status","data","_error$config","_error$response","_error$response2","_error$response2$data","originalRequest","_retry","warn","resolve","setTimeout","message","qrAPI","generate","originalUrl","createdBy","customization","logo","post","_error$response3","_error$response3$data","Error","list","params","limit","page","sortBy","order","get","_error$response4","_error$response4$data","getById","id","_error$response5","_error$response5$data","delete","_error$response6","_error$response6$data","getStats","_error$response7","_error$response7$data","healthCheck","_error$response8","details","testConnection","health"],"sources":["E:/Self/QRGenerator/qrweb/frontend/src/services/api.js"],"sourcesContent":["import axios from 'axios';\r\n\r\n// Auto-detect API URL\r\nconst getAPIUrl = () => {\r\n  // Production: use environment variable\r\n  if (process.env.NODE_ENV === 'production' && process.env.REACT_APP_API_URL) {\r\n    return process.env.REACT_APP_API_URL;\r\n  }\r\n  \r\n  // Development: use localhost\r\n  return 'http://localhost:5000/api';\r\n};\r\n\r\nconst API_URL = getAPIUrl();\r\n\r\nconsole.log('ðŸ”— API URL:', API_URL);\r\n\r\n// Create axios instance with default config\r\nconst api = axios.create({\r\n  baseURL: API_URL,\r\n  headers: {\r\n    'Content-Type': 'application/json',\r\n  },\r\n  timeout: 30000, // 30 seconds\r\n});\r\n\r\n// Request interceptor\r\napi.interceptors.request.use(\r\n  (config) => {\r\n    if (process.env.NODE_ENV === 'development') {\r\n      console.log(`ðŸ“¤ API Request: ${config.method.toUpperCase()} ${config.url}`);\r\n    }\r\n    return config;\r\n  },\r\n  (error) => {\r\n    console.error('âŒ Request Error:', error);\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\n// Response interceptor with retry logic\r\napi.interceptors.response.use(\r\n  (response) => {\r\n    if (process.env.NODE_ENV === 'development') {\r\n      console.log('ðŸ“¥ API Response:', response.status, response.data);\r\n    }\r\n    return response;\r\n  },\r\n  async (error) => {\r\n    const originalRequest = error.config;\r\n\r\n    // Retry logic for network errors\r\n    if (!error.response && !originalRequest._retry) {\r\n      originalRequest._retry = true;\r\n      console.warn('âš ï¸  Network error, retrying...');\r\n      await new Promise(resolve => setTimeout(resolve, 1000));\r\n      return api(originalRequest);\r\n    }\r\n\r\n    console.error('âŒ API Error:', {\r\n      url: error.config?.url,\r\n      status: error.response?.status,\r\n      message: error.response?.data?.error || error.message\r\n    });\r\n\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\n// QR Code API functions\r\nexport const qrAPI = {\r\n  // Generate new QR code\r\n  generate: async (originalUrl, createdBy = 'anonymous', customization = {}, logo = null) => {\r\n    try {\r\n      const response = await api.post('/qr/generate', {\r\n        originalUrl,\r\n        createdBy,\r\n        customization,\r\n        logo\r\n      });\r\n      return response.data;\r\n    } catch (error) {\r\n      throw new Error(error.response?.data?.error || 'Failed to generate QR code');\r\n    }\r\n  },\r\n\r\n  // Get all QR codes with pagination\r\n  list: async (params = {}) => {\r\n    try {\r\n      const { limit = 100, page = 1, sortBy = 'createdAt', order = 'desc' } = params;\r\n      const response = await api.get('/qr/list', {\r\n        params: { limit, page, sortBy, order },\r\n      });\r\n      return response.data;\r\n    } catch (error) {\r\n      throw new Error(error.response?.data?.error || 'Failed to fetch QR codes');\r\n    }\r\n  },\r\n\r\n  // Get single QR code by ID\r\n  getById: async (id) => {\r\n    try {\r\n      const response = await api.get(`/qr/${id}`);\r\n      return response.data;\r\n    } catch (error) {\r\n      throw new Error(error.response?.data?.error || 'Failed to fetch QR code');\r\n    }\r\n  },\r\n\r\n  // Delete QR code\r\n  delete: async (id) => {\r\n    try {\r\n      const response = await api.delete(`/qr/${id}`);\r\n      return response.data;\r\n    } catch (error) {\r\n      throw new Error(error.response?.data?.error || 'Failed to delete QR code');\r\n    }\r\n  },\r\n\r\n  // Get QR code statistics\r\n  getStats: async (id) => {\r\n    try {\r\n      const response = await api.get(`/qr/stats/${id}`);\r\n      return response.data;\r\n    } catch (error) {\r\n      throw new Error(error.response?.data?.error || 'Failed to fetch statistics');\r\n    }\r\n  },\r\n};\r\n\r\n// Health check with detailed info\r\nexport const healthCheck = async () => {\r\n  try {\r\n    const response = await api.get('/health');\r\n    return { \r\n      status: 'OK', \r\n      ...response.data \r\n    };\r\n  } catch (error) {\r\n    return { \r\n      status: 'ERROR', \r\n      error: error.message,\r\n      details: error.response?.data \r\n    };\r\n  }\r\n};\r\n\r\n// Test connection\r\nexport const testConnection = async () => {\r\n  try {\r\n    const health = await healthCheck();\r\n    return health.status === 'OK';\r\n  } catch (error) {\r\n    return false;\r\n  }\r\n};\r\n\r\nexport default api;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}