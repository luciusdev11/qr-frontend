{"ast":null,"code":"/**\r\n * Backend Failover System\r\n * Automatically switches between multiple backend servers\r\n * Priority: Render -> Railway/Fly.io -> Ngrok (local)\r\n */\n\nconst BACKENDS = [{\n  name: 'Dev',\n  url: process.env.REACT_APP_API_URL_DEV || 'http://192.168.100.131:5000/api',\n  timeout: 10000,\n  priority: 1\n}, {\n  name: 'Render (Primary)',\n  url: process.env.REACT_APP_API_URL || 'https://qr-backend-vi8o.onrender.com/api',\n  timeout: 10000,\n  priority: 1\n}, {\n  name: 'Railway (Backup)',\n  url: process.env.REACT_APP_API_URL_BACKUP || 'http://192.168.100.131:5000/api',\n  timeout: 8000,\n  priority: 2\n}, {\n  name: 'Ngrok (Local)',\n  url: process.env.REACT_APP_API_URL_LOCAL || 'https://wintriest-indestructibly-kenny.ngrok-free.dev/api',\n  timeout: 5000,\n  priority: 3\n}];\nclass BackendFailover {\n  constructor() {\n    this.currentBackend = null;\n    this.backendStatus = new Map();\n    this.failureCount = new Map();\n    this.lastCheck = new Map();\n\n    // Initialize status\n    BACKENDS.forEach(backend => {\n      this.backendStatus.set(backend.name, 'unknown');\n      this.failureCount.set(backend.name, 0);\n      this.lastCheck.set(backend.name, 0);\n    });\n\n    // Set initial backend\n    this.currentBackend = BACKENDS[0];\n    this.checkAllBackends();\n  }\n\n  /**\r\n   * Get current active backend\r\n   */\n  getCurrentBackend() {\n    return this.currentBackend;\n  }\n\n  /**\r\n   * Get current backend URL\r\n   */\n  getCurrentURL() {\n    return this.currentBackend.url;\n  }\n\n  /**\r\n   * Check health of a specific backend\r\n   */\n  async checkBackendHealth(backend) {\n    const controller = new AbortController();\n    const timeoutId = setTimeout(() => controller.abort(), backend.timeout);\n    try {\n      const response = await fetch(`${backend.url}/health`, {\n        method: 'GET',\n        signal: controller.signal,\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n      clearTimeout(timeoutId);\n      if (response.ok) {\n        this.backendStatus.set(backend.name, 'online');\n        this.failureCount.set(backend.name, 0);\n        this.lastCheck.set(backend.name, Date.now());\n        return true;\n      }\n      throw new Error('Health check failed');\n    } catch (error) {\n      clearTimeout(timeoutId);\n      this.backendStatus.set(backend.name, 'offline');\n      this.failureCount.set(backend.name, this.failureCount.get(backend.name) + 1);\n      this.lastCheck.set(backend.name, Date.now());\n      console.warn(`âŒ ${backend.name} is offline:`, error.message);\n      return false;\n    }\n  }\n\n  /**\r\n   * Check all backends and update status\r\n   */\n  async checkAllBackends() {\n    console.log('ðŸ” Checking all backends...');\n    const checks = BACKENDS.map(backend => this.checkBackendHealth(backend));\n    await Promise.allSettled(checks);\n\n    // Log status\n    BACKENDS.forEach(backend => {\n      const status = this.backendStatus.get(backend.name);\n      const icon = status === 'online' ? 'âœ…' : 'âŒ';\n      console.log(`${icon} ${backend.name}: ${status}`);\n    });\n\n    // Select best available backend\n    this.selectBestBackend();\n  }\n\n  /**\r\n   * Select the best available backend based on priority\r\n   */\n  selectBestBackend() {\n    // Find first online backend by priority\n    const availableBackend = BACKENDS.sort((a, b) => a.priority - b.priority).find(backend => this.backendStatus.get(backend.name) === 'online');\n    if (availableBackend) {\n      if (this.currentBackend.name !== availableBackend.name) {\n        console.log(`ðŸ”„ Switching to: ${availableBackend.name}`);\n        this.currentBackend = availableBackend;\n\n        // Notify user\n        this.notifyBackendChange(availableBackend.name);\n      }\n    } else {\n      console.error('âŒ All backends are offline!');\n      this.notifyAllBackendsDown();\n    }\n  }\n\n  /**\r\n   * Make API request with automatic failover\r\n   */\n  async makeRequest(endpoint, options = {}) {\n    let lastError = null;\n\n    // Try current backend first\n    try {\n      return await this.tryBackend(this.currentBackend, endpoint, options);\n    } catch (error) {\n      lastError = error;\n      console.warn(`Failed on ${this.currentBackend.name}, trying failover...`);\n    }\n\n    // Try other backends in order\n    for (const backend of BACKENDS) {\n      if (backend.name === this.currentBackend.name) continue;\n      if (this.backendStatus.get(backend.name) !== 'offline') {\n        try {\n          const result = await this.tryBackend(backend, endpoint, options);\n\n          // Success! Switch to this backend\n          this.currentBackend = backend;\n          this.notifyBackendChange(backend.name);\n          return result;\n        } catch (error) {\n          lastError = error;\n          console.warn(`Failed on ${backend.name}, trying next...`);\n        }\n      }\n    }\n\n    // All backends failed\n    throw lastError || new Error('All backends are unavailable');\n  }\n\n  /**\r\n   * Try making request to specific backend\r\n   */\n  async tryBackend(backend, endpoint, options) {\n    const controller = new AbortController();\n    const timeoutId = setTimeout(() => controller.abort(), backend.timeout);\n    try {\n      const url = `${backend.url}${endpoint}`;\n      const response = await fetch(url, {\n        ...options,\n        signal: controller.signal,\n        credentials: 'include'\n      });\n      clearTimeout(timeoutId);\n      if (!response.ok) {\n        throw new Error(`HTTP ${response.status}: ${response.statusText}`);\n      }\n      const data = await response.json();\n\n      // Mark backend as healthy\n      this.backendStatus.set(backend.name, 'online');\n      this.failureCount.set(backend.name, 0);\n      return data;\n    } catch (error) {\n      clearTimeout(timeoutId);\n\n      // Mark backend as unhealthy\n      const failures = this.failureCount.get(backend.name) + 1;\n      this.failureCount.set(backend.name, failures);\n      if (failures >= 3) {\n        this.backendStatus.set(backend.name, 'offline');\n      }\n      throw error;\n    }\n  }\n\n  /**\r\n   * Notify user of backend change\r\n   */\n  notifyBackendChange(backendName) {\n    const event = new CustomEvent('backend-changed', {\n      detail: {\n        backend: backendName\n      }\n    });\n    window.dispatchEvent(event);\n  }\n\n  /**\r\n   * Notify user all backends are down\r\n   */\n  notifyAllBackendsDown() {\n    const event = new CustomEvent('backends-down');\n    window.dispatchEvent(event);\n  }\n\n  /**\r\n   * Get status of all backends\r\n   */\n  getStatus() {\n    return BACKENDS.map(backend => ({\n      name: backend.name,\n      url: backend.url,\n      status: this.backendStatus.get(backend.name),\n      failures: this.failureCount.get(backend.name),\n      lastCheck: this.lastCheck.get(backend.name),\n      isCurrent: backend.name === this.currentBackend.name\n    }));\n  }\n\n  /**\r\n   * Force backend switch\r\n   */\n  async switchBackend(backendName) {\n    const backend = BACKENDS.find(b => b.name === backendName);\n    if (!backend) {\n      throw new Error('Backend not found');\n    }\n    const isHealthy = await this.checkBackendHealth(backend);\n    if (isHealthy) {\n      this.currentBackend = backend;\n      this.notifyBackendChange(backend.name);\n      return true;\n    }\n    return false;\n  }\n}\n\n// Singleton instance\nconst backendFailover = new BackendFailover();\n\n// Check backends periodically\nsetInterval(() => {\n  backendFailover.checkAllBackends();\n}, 30000); // Every 30 seconds\n\nexport default backendFailover;","map":{"version":3,"names":["BACKENDS","name","url","process","env","REACT_APP_API_URL_DEV","timeout","priority","REACT_APP_API_URL","REACT_APP_API_URL_BACKUP","REACT_APP_API_URL_LOCAL","BackendFailover","constructor","currentBackend","backendStatus","Map","failureCount","lastCheck","forEach","backend","set","checkAllBackends","getCurrentBackend","getCurrentURL","checkBackendHealth","controller","AbortController","timeoutId","setTimeout","abort","response","fetch","method","signal","headers","clearTimeout","ok","Date","now","Error","error","get","console","warn","message","log","checks","map","Promise","allSettled","status","icon","selectBestBackend","availableBackend","sort","a","b","find","notifyBackendChange","notifyAllBackendsDown","makeRequest","endpoint","options","lastError","tryBackend","result","credentials","statusText","data","json","failures","backendName","event","CustomEvent","detail","window","dispatchEvent","getStatus","isCurrent","switchBackend","isHealthy","backendFailover","setInterval"],"sources":["E:/Self/QRGenerator/qrweb/frontend/src/services/backendFailover.js"],"sourcesContent":["/**\r\n * Backend Failover System\r\n * Automatically switches between multiple backend servers\r\n * Priority: Render -> Railway/Fly.io -> Ngrok (local)\r\n */\r\n\r\nconst BACKENDS = [\r\n    {\r\n      name: 'Dev',\r\n      url: process.env.REACT_APP_API_URL_DEV || 'http://192.168.100.131:5000/api',\r\n      timeout: 10000,\r\n      priority: 1\r\n    },\r\n    {\r\n      name: 'Render (Primary)',\r\n      url: process.env.REACT_APP_API_URL || 'https://qr-backend-vi8o.onrender.com/api',\r\n      timeout: 10000,\r\n      priority: 1\r\n    },\r\n    {\r\n      name: 'Railway (Backup)',\r\n      url: process.env.REACT_APP_API_URL_BACKUP || 'http://192.168.100.131:5000/api',\r\n      timeout: 8000,\r\n      priority: 2\r\n    },\r\n    {\r\n      name: 'Ngrok (Local)',\r\n      url: process.env.REACT_APP_API_URL_LOCAL || 'https://wintriest-indestructibly-kenny.ngrok-free.dev/api',\r\n      timeout: 5000,\r\n      priority: 3\r\n    }\r\n  ];\r\n  \r\n  class BackendFailover {\r\n    constructor() {\r\n      this.currentBackend = null;\r\n      this.backendStatus = new Map();\r\n      this.failureCount = new Map();\r\n      this.lastCheck = new Map();\r\n      \r\n      // Initialize status\r\n      BACKENDS.forEach(backend => {\r\n        this.backendStatus.set(backend.name, 'unknown');\r\n        this.failureCount.set(backend.name, 0);\r\n        this.lastCheck.set(backend.name, 0);\r\n      });\r\n  \r\n      // Set initial backend\r\n      this.currentBackend = BACKENDS[0];\r\n      this.checkAllBackends();\r\n    }\r\n  \r\n    /**\r\n     * Get current active backend\r\n     */\r\n    getCurrentBackend() {\r\n      return this.currentBackend;\r\n    }\r\n  \r\n    /**\r\n     * Get current backend URL\r\n     */\r\n    getCurrentURL() {\r\n      return this.currentBackend.url;\r\n    }\r\n  \r\n    /**\r\n     * Check health of a specific backend\r\n     */\r\n    async checkBackendHealth(backend) {\r\n      const controller = new AbortController();\r\n      const timeoutId = setTimeout(() => controller.abort(), backend.timeout);\r\n  \r\n      try {\r\n        const response = await fetch(`${backend.url}/health`, {\r\n          method: 'GET',\r\n          signal: controller.signal,\r\n          headers: { 'Content-Type': 'application/json' }\r\n        });\r\n  \r\n        clearTimeout(timeoutId);\r\n  \r\n        if (response.ok) {\r\n          this.backendStatus.set(backend.name, 'online');\r\n          this.failureCount.set(backend.name, 0);\r\n          this.lastCheck.set(backend.name, Date.now());\r\n          return true;\r\n        }\r\n  \r\n        throw new Error('Health check failed');\r\n  \r\n      } catch (error) {\r\n        clearTimeout(timeoutId);\r\n        this.backendStatus.set(backend.name, 'offline');\r\n        this.failureCount.set(backend.name, this.failureCount.get(backend.name) + 1);\r\n        this.lastCheck.set(backend.name, Date.now());\r\n        \r\n        console.warn(`âŒ ${backend.name} is offline:`, error.message);\r\n        return false;\r\n      }\r\n    }\r\n  \r\n    /**\r\n     * Check all backends and update status\r\n     */\r\n    async checkAllBackends() {\r\n      console.log('ðŸ” Checking all backends...');\r\n      \r\n      const checks = BACKENDS.map(backend => this.checkBackendHealth(backend));\r\n      await Promise.allSettled(checks);\r\n  \r\n      // Log status\r\n      BACKENDS.forEach(backend => {\r\n        const status = this.backendStatus.get(backend.name);\r\n        const icon = status === 'online' ? 'âœ…' : 'âŒ';\r\n        console.log(`${icon} ${backend.name}: ${status}`);\r\n      });\r\n  \r\n      // Select best available backend\r\n      this.selectBestBackend();\r\n    }\r\n  \r\n    /**\r\n     * Select the best available backend based on priority\r\n     */\r\n    selectBestBackend() {\r\n      // Find first online backend by priority\r\n      const availableBackend = BACKENDS\r\n        .sort((a, b) => a.priority - b.priority)\r\n        .find(backend => this.backendStatus.get(backend.name) === 'online');\r\n  \r\n      if (availableBackend) {\r\n        if (this.currentBackend.name !== availableBackend.name) {\r\n          console.log(`ðŸ”„ Switching to: ${availableBackend.name}`);\r\n          this.currentBackend = availableBackend;\r\n          \r\n          // Notify user\r\n          this.notifyBackendChange(availableBackend.name);\r\n        }\r\n      } else {\r\n        console.error('âŒ All backends are offline!');\r\n        this.notifyAllBackendsDown();\r\n      }\r\n    }\r\n  \r\n    /**\r\n     * Make API request with automatic failover\r\n     */\r\n    async makeRequest(endpoint, options = {}) {\r\n      let lastError = null;\r\n      \r\n      // Try current backend first\r\n      try {\r\n        return await this.tryBackend(this.currentBackend, endpoint, options);\r\n      } catch (error) {\r\n        lastError = error;\r\n        console.warn(`Failed on ${this.currentBackend.name}, trying failover...`);\r\n      }\r\n  \r\n      // Try other backends in order\r\n      for (const backend of BACKENDS) {\r\n        if (backend.name === this.currentBackend.name) continue;\r\n        \r\n        if (this.backendStatus.get(backend.name) !== 'offline') {\r\n          try {\r\n            const result = await this.tryBackend(backend, endpoint, options);\r\n            \r\n            // Success! Switch to this backend\r\n            this.currentBackend = backend;\r\n            this.notifyBackendChange(backend.name);\r\n            \r\n            return result;\r\n          } catch (error) {\r\n            lastError = error;\r\n            console.warn(`Failed on ${backend.name}, trying next...`);\r\n          }\r\n        }\r\n      }\r\n  \r\n      // All backends failed\r\n      throw lastError || new Error('All backends are unavailable');\r\n    }\r\n  \r\n    /**\r\n     * Try making request to specific backend\r\n     */\r\n    async tryBackend(backend, endpoint, options) {\r\n      const controller = new AbortController();\r\n      const timeoutId = setTimeout(() => controller.abort(), backend.timeout);\r\n  \r\n      try {\r\n        const url = `${backend.url}${endpoint}`;\r\n        const response = await fetch(url, {\r\n          ...options,\r\n          signal: controller.signal,\r\n          credentials: 'include'\r\n        });\r\n  \r\n        clearTimeout(timeoutId);\r\n  \r\n        if (!response.ok) {\r\n          throw new Error(`HTTP ${response.status}: ${response.statusText}`);\r\n        }\r\n  \r\n        const data = await response.json();\r\n        \r\n        // Mark backend as healthy\r\n        this.backendStatus.set(backend.name, 'online');\r\n        this.failureCount.set(backend.name, 0);\r\n        \r\n        return data;\r\n  \r\n      } catch (error) {\r\n        clearTimeout(timeoutId);\r\n        \r\n        // Mark backend as unhealthy\r\n        const failures = this.failureCount.get(backend.name) + 1;\r\n        this.failureCount.set(backend.name, failures);\r\n        \r\n        if (failures >= 3) {\r\n          this.backendStatus.set(backend.name, 'offline');\r\n        }\r\n  \r\n        throw error;\r\n      }\r\n    }\r\n  \r\n    /**\r\n     * Notify user of backend change\r\n     */\r\n    notifyBackendChange(backendName) {\r\n      const event = new CustomEvent('backend-changed', {\r\n        detail: { backend: backendName }\r\n      });\r\n      window.dispatchEvent(event);\r\n    }\r\n  \r\n    /**\r\n     * Notify user all backends are down\r\n     */\r\n    notifyAllBackendsDown() {\r\n      const event = new CustomEvent('backends-down');\r\n      window.dispatchEvent(event);\r\n    }\r\n  \r\n    /**\r\n     * Get status of all backends\r\n     */\r\n    getStatus() {\r\n      return BACKENDS.map(backend => ({\r\n        name: backend.name,\r\n        url: backend.url,\r\n        status: this.backendStatus.get(backend.name),\r\n        failures: this.failureCount.get(backend.name),\r\n        lastCheck: this.lastCheck.get(backend.name),\r\n        isCurrent: backend.name === this.currentBackend.name\r\n      }));\r\n    }\r\n  \r\n    /**\r\n     * Force backend switch\r\n     */\r\n    async switchBackend(backendName) {\r\n      const backend = BACKENDS.find(b => b.name === backendName);\r\n      \r\n      if (!backend) {\r\n        throw new Error('Backend not found');\r\n      }\r\n  \r\n      const isHealthy = await this.checkBackendHealth(backend);\r\n      \r\n      if (isHealthy) {\r\n        this.currentBackend = backend;\r\n        this.notifyBackendChange(backend.name);\r\n        return true;\r\n      }\r\n  \r\n      return false;\r\n    }\r\n  }\r\n  \r\n  // Singleton instance\r\n  const backendFailover = new BackendFailover();\r\n  \r\n  // Check backends periodically\r\n  setInterval(() => {\r\n    backendFailover.checkAllBackends();\r\n  }, 30000); // Every 30 seconds\r\n  \r\n  export default backendFailover;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}