{"ast":null,"code":"import _objectSpread from\"E:/Self/QRGenerator/qrweb/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";/**\r\n * Server Selection System v1.0.3a\r\n * Manual server selection - Railway as primary\r\n */const SERVERS={production:{name:'Railway (Primary)',url:process.env.REACT_APP_API_URL||'https://qrserver.up.railway.app/api',description:'Main production server â€¢ 2 vCPU + 1GB RAM',icon:'ðŸš€',color:'#8b5cf6',specs:'2 vCPU / 1GB'},backup:{name:'Render (Backup)',url:process.env.REACT_APP_API_URL_BACKUP||'https://qr-backend-vi8o.onrender.com/api',description:'Backup production server â€¢ 0.1 vCPU + 124MB RAM',icon:'ðŸ”„',color:'#3b82f6',specs:'0.1 vCPU / 124MB'},development:{name:'Development (Local)',url:process.env.REACT_APP_API_URL_DEV||'http://localhost:5000/api',description:'Local development server â€¢ Optimized for testing',icon:'ðŸ’»',color:'#10b981',specs:'Local'}};class ServerSelector{constructor(){const savedServer=localStorage.getItem('selectedServer');this.currentServer=savedServer||'production';// Default to Railway\nthis.serverStatus=new Map();Object.keys(SERVERS).forEach(key=>{this.serverStatus.set(key,'unknown');});}getCurrentServer(){return SERVERS[this.currentServer];}getCurrentURL(){return SERVERS[this.currentServer].url;}switchServer(serverKey){if(SERVERS[serverKey]){this.currentServer=serverKey;localStorage.setItem('selectedServer',serverKey);this.notifyServerChange(serverKey);return true;}return false;}getServers(){return Object.entries(SERVERS).map(_ref=>{let[key,server]=_ref;return _objectSpread(_objectSpread({key},server),{},{status:this.serverStatus.get(key),isCurrent:key===this.currentServer});});}async checkServerHealth(serverKey){const server=SERVERS[serverKey];if(!server)return false;const controller=new AbortController();const timeoutId=setTimeout(()=>controller.abort(),5000);try{const response=await fetch(\"\".concat(server.url,\"/health\"),{method:'GET',signal:controller.signal,headers:{'Content-Type':'application/json'}});clearTimeout(timeoutId);if(response.ok){this.serverStatus.set(serverKey,'online');return true;}throw new Error('Health check failed');}catch(error){clearTimeout(timeoutId);this.serverStatus.set(serverKey,'offline');console.warn(\"\\u274C \".concat(server.name,\" is offline:\"),error.message);return false;}}async checkAllServers(){console.log('ðŸ” Checking all servers...');const checks=Object.keys(SERVERS).map(key=>this.checkServerHealth(key));await Promise.allSettled(checks);Object.entries(SERVERS).forEach(_ref2=>{let[key,server]=_ref2;const status=this.serverStatus.get(key);const icon=status==='online'?'âœ…':'âŒ';console.log(\"\".concat(icon,\" \").concat(server.name,\": \").concat(status));});}getStatus(serverKey){return this.serverStatus.get(serverKey);}notifyServerChange(serverKey){const event=new CustomEvent('server-changed',{detail:{server:SERVERS[serverKey],key:serverKey}});window.dispatchEvent(event);}}const serverSelector=new ServerSelector();// Check servers on load\nserverSelector.checkAllServers();// Periodic health check (every 60 seconds)\nsetInterval(()=>{serverSelector.checkAllServers();},60000);export default serverSelector;","map":{"version":3,"names":["SERVERS","production","name","url","process","env","REACT_APP_API_URL","description","icon","color","specs","backup","REACT_APP_API_URL_BACKUP","development","REACT_APP_API_URL_DEV","ServerSelector","constructor","savedServer","localStorage","getItem","currentServer","serverStatus","Map","Object","keys","forEach","key","set","getCurrentServer","getCurrentURL","switchServer","serverKey","setItem","notifyServerChange","getServers","entries","map","_ref","server","_objectSpread","status","get","isCurrent","checkServerHealth","controller","AbortController","timeoutId","setTimeout","abort","response","fetch","concat","method","signal","headers","clearTimeout","ok","Error","error","console","warn","message","checkAllServers","log","checks","Promise","allSettled","_ref2","getStatus","event","CustomEvent","detail","window","dispatchEvent","serverSelector","setInterval"],"sources":["E:/Self/QRGenerator/qrweb/frontend/src/services/serverSelector.js"],"sourcesContent":["/**\r\n * Server Selection System v1.0.3a\r\n * Manual server selection - Railway as primary\r\n */\r\n\r\nconst SERVERS = {\r\n  production: {\r\n    name: 'Railway (Primary)',\r\n    url: process.env.REACT_APP_API_URL || 'https://qrserver.up.railway.app/api',\r\n    description: 'Main production server â€¢ 2 vCPU + 1GB RAM',\r\n    icon: 'ðŸš€',\r\n    color: '#8b5cf6',\r\n    specs: '2 vCPU / 1GB'\r\n  },\r\n  backup: {\r\n    name: 'Render (Backup)',\r\n    url: process.env.REACT_APP_API_URL_BACKUP || 'https://qr-backend-vi8o.onrender.com/api',\r\n    description: 'Backup production server â€¢ 0.1 vCPU + 124MB RAM',\r\n    icon: 'ðŸ”„',\r\n    color: '#3b82f6',\r\n    specs: '0.1 vCPU / 124MB'\r\n  },\r\n  development: {\r\n    name: 'Development (Local)',\r\n    url: process.env.REACT_APP_API_URL_DEV || 'http://localhost:5000/api',\r\n    description: 'Local development server â€¢ Optimized for testing',\r\n    icon: 'ðŸ’»',\r\n    color: '#10b981',\r\n    specs: 'Local'\r\n  }\r\n};\r\n\r\nclass ServerSelector {\r\n  constructor() {\r\n    const savedServer = localStorage.getItem('selectedServer');\r\n    this.currentServer = savedServer || 'production'; // Default to Railway\r\n    this.serverStatus = new Map();\r\n    \r\n    Object.keys(SERVERS).forEach(key => {\r\n      this.serverStatus.set(key, 'unknown');\r\n    });\r\n  }\r\n\r\n  getCurrentServer() {\r\n    return SERVERS[this.currentServer];\r\n  }\r\n\r\n  getCurrentURL() {\r\n    return SERVERS[this.currentServer].url;\r\n  }\r\n\r\n  switchServer(serverKey) {\r\n    if (SERVERS[serverKey]) {\r\n      this.currentServer = serverKey;\r\n      localStorage.setItem('selectedServer', serverKey);\r\n      this.notifyServerChange(serverKey);\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  getServers() {\r\n    return Object.entries(SERVERS).map(([key, server]) => ({\r\n      key,\r\n      ...server,\r\n      status: this.serverStatus.get(key),\r\n      isCurrent: key === this.currentServer\r\n    }));\r\n  }\r\n\r\n  async checkServerHealth(serverKey) {\r\n    const server = SERVERS[serverKey];\r\n    if (!server) return false;\r\n\r\n    const controller = new AbortController();\r\n    const timeoutId = setTimeout(() => controller.abort(), 5000);\r\n\r\n    try {\r\n      const response = await fetch(`${server.url}/health`, {\r\n        method: 'GET',\r\n        signal: controller.signal,\r\n        headers: { 'Content-Type': 'application/json' }\r\n      });\r\n\r\n      clearTimeout(timeoutId);\r\n\r\n      if (response.ok) {\r\n        this.serverStatus.set(serverKey, 'online');\r\n        return true;\r\n      }\r\n\r\n      throw new Error('Health check failed');\r\n\r\n    } catch (error) {\r\n      clearTimeout(timeoutId);\r\n      this.serverStatus.set(serverKey, 'offline');\r\n      console.warn(`âŒ ${server.name} is offline:`, error.message);\r\n      return false;\r\n    }\r\n  }\r\n\r\n  async checkAllServers() {\r\n    console.log('ðŸ” Checking all servers...');\r\n    \r\n    const checks = Object.keys(SERVERS).map(key => \r\n      this.checkServerHealth(key)\r\n    );\r\n    \r\n    await Promise.allSettled(checks);\r\n\r\n    Object.entries(SERVERS).forEach(([key, server]) => {\r\n      const status = this.serverStatus.get(key);\r\n      const icon = status === 'online' ? 'âœ…' : 'âŒ';\r\n      console.log(`${icon} ${server.name}: ${status}`);\r\n    });\r\n  }\r\n\r\n  getStatus(serverKey) {\r\n    return this.serverStatus.get(serverKey);\r\n  }\r\n\r\n  notifyServerChange(serverKey) {\r\n    const event = new CustomEvent('server-changed', {\r\n      detail: { \r\n        server: SERVERS[serverKey],\r\n        key: serverKey\r\n      }\r\n    });\r\n    window.dispatchEvent(event);\r\n  }\r\n}\r\n\r\nconst serverSelector = new ServerSelector();\r\n\r\n// Check servers on load\r\nserverSelector.checkAllServers();\r\n\r\n// Periodic health check (every 60 seconds)\r\nsetInterval(() => {\r\n  serverSelector.checkAllServers();\r\n}, 60000);\r\n\r\nexport default serverSelector;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}